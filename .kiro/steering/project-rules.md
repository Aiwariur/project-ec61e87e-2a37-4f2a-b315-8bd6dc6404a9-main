---
inclusion: always
---

# Правила работы с проектом ПопугайМаркет

## Язык общения
**Всегда общайся с пользователем на русском языке.** Это основное правило.

## Контекст проекта
Перед выполнением любой задачи прочитай и усвой информацию из `PROJECT_DOCUMENTATION.md`:
- Это e-commerce приложение для продажи экзотических попугаев
- Frontend: React 18 + TypeScript + Vite
- Backend: Express + SQLite (better-sqlite3)
- Фронтенд работает на http://localhost:5173
- Бэкенд работает на http://localhost:3001
- Товары загружаются с API `/api/products`
- Заказы отправляются на `/api/orders`
- Админка доступна по адресу `/admin`

## Структура проекта
```
src/
├── components/     # React компоненты
├── pages/          # Страницы (Index, Admin, NotFound)
├── lib/            # Store (Zustand), утилиты
├── hooks/          # Кастомные хуки
└── assets/         # Изображения

server/
├── index.js        # Express сервер
├── db.js           # SQLite инициализация
├── telegram.js     # Telegram-уведомления
└── routes/         # API маршруты (products, orders)
```

## Важные моменты
1. **Корзина в памяти** — при перезагрузке очищается. Нужно добавить localStorage если требуется сохранение.
2. **API должен быть запущен** — фронтенд зависит от бэкенда на порту 3001.
3. **Таблицы БД** — автоматически создаются в `server/db.js` при запуске.
4. **Фото товаров** — находятся в `public/images/products/` (product-65.jpg до product-127.jpg).
5. **Статусы заказов** — `new`, `confirmed`, `shipped`, `delivered`, `cancelled`.
6. **Telegram-уведомления** — настраиваются через `.env`. Для настройки: `npm run telegram:get-id`.

## Команды для запуска
```bash
npm run dev          # Только фронтенд
npm run server       # Только бэкенд
npm run dev:all      # Фронтенд + бэкенд одновременно
npm run build        # Сборка для production
npm run lint         # Проверка кода
npm run test         # Тесты

# База данных
npm run setup        # Настройка БД (миграция + импорт)

# Telegram
npm run telegram:get-id  # Получить CHAT_ID
npm run test:telegram    # Тест уведомлений
```

## Перед каждой задачей
1. Прочитай этот файл (ты уже это делаешь)
2. Прочитай `PROJECT_DOCUMENTATION.md` если нужен контекст
3. Проверь структуру файлов если работаешь с новой частью кода
4. Убедись, что понимаешь, что нужно сделать
5. Выполни задачу и проверь результат

## Стиль общения
- Говори прямо и по делу
- Используй русский язык
- Объясняй что ты делаешь и почему
- Если что-то не работает, найди причину и исправь
