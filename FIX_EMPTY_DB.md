# ðŸ”¥ Ð˜Ð¡ÐŸÐ ÐÐ’Ð›Ð•ÐÐ˜Ð•: Ð‘Ð°Ð·Ð° Ð´Ð°Ð½Ð½Ñ‹Ñ… Ð¿ÑƒÑÑ‚Ð°Ñ Ð½Ð° ÑÐµÑ€Ð²ÐµÑ€Ðµ

## ÐŸÑ€Ð¾Ð±Ð»ÐµÐ¼Ð°
ÐÐ° ÑÐµÑ€Ð²ÐµÑ€Ðµ Ð¿Ð¾ÐºÐ°Ð·Ñ‹Ð²Ð°ÐµÑ‚ÑÑ 0 Ñ‚Ð¾Ð²Ð°Ñ€Ð¾Ð², Ñ…Ð¾Ñ‚Ñ Ð»Ð¾ÐºÐ°Ð»ÑŒÐ½Ð¾ Ð²ÑÑ‘ Ñ€Ð°Ð±Ð¾Ñ‚Ð°ÐµÑ‚.

## Ð ÐµÑˆÐµÐ½Ð¸Ðµ

### Ð’Ð°Ñ€Ð¸Ð°Ð½Ñ‚ 1: Ð§ÐµÑ€ÐµÐ· Docker (Ñ€ÐµÐºÐ¾Ð¼ÐµÐ½Ð´ÑƒÐµÑ‚ÑÑ)
Ð•ÑÐ»Ð¸ Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐµÑˆÑŒ Docker, Ð¿Ñ€Ð¾ÑÑ‚Ð¾ Ð¿ÐµÑ€ÐµÑÐ¾Ð±ÐµÑ€Ð¸ Ð¸ Ð¿ÐµÑ€ÐµÐ·Ð°Ð¿ÑƒÑÑ‚Ð¸ ÐºÐ¾Ð½Ñ‚ÐµÐ¹Ð½ÐµÑ€:

```bash
# ÐŸÐµÑ€ÐµÑÐ¾Ð±Ñ€Ð°Ñ‚ÑŒ Ð¾Ð±Ñ€Ð°Ð·
docker-compose build --no-cache

# ÐŸÐµÑ€ÐµÐ·Ð°Ð¿ÑƒÑÑ‚Ð¸Ñ‚ÑŒ
docker-compose up -d

# ÐŸÑ€Ð¾Ð²ÐµÑ€Ð¸Ñ‚ÑŒ Ð»Ð¾Ð³Ð¸
docker-compose logs -f
```

Ð¡ÐºÑ€Ð¸Ð¿Ñ‚ `force-init-db.js` Ð°Ð²Ñ‚Ð¾Ð¼Ð°Ñ‚Ð¸Ñ‡ÐµÑÐºÐ¸ Ð·Ð°Ð¿Ð¾Ð»Ð½Ð¸Ñ‚ Ð±Ð°Ð·Ñƒ Ð¿Ñ€Ð¸ Ð·Ð°Ð¿ÑƒÑÐºÐµ.

### Ð’Ð°Ñ€Ð¸Ð°Ð½Ñ‚ 2: Ð’Ñ€ÑƒÑ‡Ð½ÑƒÑŽ Ð½Ð° ÑÐµÑ€Ð²ÐµÑ€Ðµ
Ð•ÑÐ»Ð¸ Ð·Ð°Ð¿ÑƒÑÐºÐ°ÐµÑˆÑŒ Ð±ÐµÐ· Docker:

```bash
# Ð—Ð°Ð¹Ð´Ð¸ Ð½Ð° ÑÐµÑ€Ð²ÐµÑ€
ssh user@your-server

# ÐŸÐµÑ€ÐµÐ¹Ð´Ð¸ Ð² Ð´Ð¸Ñ€ÐµÐºÑ‚Ð¾Ñ€Ð¸ÑŽ Ð¿Ñ€Ð¾ÐµÐºÑ‚Ð°
cd /path/to/project

# Ð—Ð°Ð¿ÑƒÑÑ‚Ð¸ ÑÐºÑ€Ð¸Ð¿Ñ‚ Ð¸Ð½Ð¸Ñ†Ð¸Ð°Ð»Ð¸Ð·Ð°Ñ†Ð¸Ð¸
NODE_ENV=production node force-init-db.js

# ÐŸÐµÑ€ÐµÐ·Ð°Ð¿ÑƒÑÑ‚Ð¸ ÑÐµÑ€Ð²ÐµÑ€
pm2 restart all
# Ð¸Ð»Ð¸
systemctl restart your-service
```

### Ð’Ð°Ñ€Ð¸Ð°Ð½Ñ‚ 3: ÐŸÑ€Ð¾Ð²ÐµÑ€ÐºÐ° Ñ‡Ñ‚Ð¾ Ð¿Ð¾ÑˆÐ»Ð¾ Ð½Ðµ Ñ‚Ð°Ðº

```bash
# ÐŸÑ€Ð¾Ð²ÐµÑ€ÑŒ Ñ‡Ñ‚Ð¾ products.json Ð½Ð° Ð¼ÐµÑÑ‚Ðµ
ls -lh products.json

# ÐŸÑ€Ð¾Ð²ÐµÑ€ÑŒ Ð»Ð¾Ð³Ð¸ ÑÐµÑ€Ð²ÐµÑ€Ð°
docker-compose logs
# Ð¸Ð»Ð¸
pm2 logs
# Ð¸Ð»Ð¸
journalctl -u your-service -f

# ÐŸÑ€Ð¾Ð²ÐµÑ€ÑŒ API Ð½Ð°Ð¿Ñ€ÑÐ¼ÑƒÑŽ
curl http://localhost:3000/api/products
```

## Ð§Ñ‚Ð¾ Ð±Ñ‹Ð»Ð¾ Ð¸ÑÐ¿Ñ€Ð°Ð²Ð»ÐµÐ½Ð¾

1. Ð¡Ð¾Ð·Ð´Ð°Ð½ ÑÐºÑ€Ð¸Ð¿Ñ‚ `force-init-db.js` ÐºÐ¾Ñ‚Ð¾Ñ€Ñ‹Ð¹:
   - Ð˜Ñ‰ÐµÑ‚ products.json Ð² Ð½ÐµÑÐºÐ¾Ð»ÑŒÐºÐ¸Ñ… Ð¼ÐµÑÑ‚Ð°Ñ…
   - ÐžÑ‡Ð¸Ñ‰Ð°ÐµÑ‚ ÑÑ‚Ð°Ñ€ÑƒÑŽ Ñ‚Ð°Ð±Ð»Ð¸Ñ†Ñƒ products
   - Ð—Ð°Ð¿Ð¾Ð»Ð½ÑÐµÑ‚ Ð±Ð°Ð·Ñƒ Ñ‚Ð¾Ð²Ð°Ñ€Ð°Ð¼Ð¸
   - ÐŸÐ¾ÐºÐ°Ð·Ñ‹Ð²Ð°ÐµÑ‚ Ð¿Ð¾Ð´Ñ€Ð¾Ð±Ð½Ñ‹Ðµ Ð»Ð¾Ð³Ð¸

2. ÐžÐ±Ð½Ð¾Ð²Ð»Ñ‘Ð½ `docker-entrypoint.sh`:
   - Ð¢ÐµÐ¿ÐµÑ€ÑŒ Ð’Ð¡Ð•Ð“Ð”Ð Ð·Ð°Ð¿ÑƒÑÐºÐ°ÐµÑ‚ Ð¸Ð½Ð¸Ñ†Ð¸Ð°Ð»Ð¸Ð·Ð°Ñ†Ð¸ÑŽ Ð¿Ñ€Ð¸ ÑÑ‚Ð°Ñ€Ñ‚Ðµ
   - ÐŸÐ¾ÐºÐ°Ð·Ñ‹Ð²Ð°ÐµÑ‚ Ð¿Ð¾Ð½ÑÑ‚Ð½Ñ‹Ðµ ÑÐ¾Ð¾Ð±Ñ‰ÐµÐ½Ð¸Ñ Ð¾Ð± Ð¾ÑˆÐ¸Ð±ÐºÐ°Ñ…

3. ÐžÐ±Ð½Ð¾Ð²Ð»Ñ‘Ð½ `Dockerfile`:
   - ÐšÐ¾Ð¿Ð¸Ñ€ÑƒÐµÑ‚ Ð²ÑÐµ Ð½ÑƒÐ¶Ð½Ñ‹Ðµ Ñ„Ð°Ð¹Ð»Ñ‹
   - ÐŸÑ€Ð¾Ð²ÐµÑ€ÑÐµÑ‚ Ñ‡Ñ‚Ð¾ products.json Ð½Ð° Ð¼ÐµÑÑ‚Ðµ

## ÐŸÐ¾ÑÐ»Ðµ Ð¸ÑÐ¿Ñ€Ð°Ð²Ð»ÐµÐ½Ð¸Ñ

ÐŸÑ€Ð¾Ð²ÐµÑ€ÑŒ Ñ‡Ñ‚Ð¾ Ñ‚Ð¾Ð²Ð°Ñ€Ñ‹ Ð¿Ð¾ÑÐ²Ð¸Ð»Ð¸ÑÑŒ:
```bash
# ÐžÑ‚ÐºÑ€Ð¾Ð¹ ÑÐ°Ð¹Ñ‚ Ð² Ð±Ñ€Ð°ÑƒÐ·ÐµÑ€Ðµ
# Ð”Ð¾Ð»Ð¶Ð½Ñ‹ Ð¿Ð¾ÐºÐ°Ð·Ð°Ñ‚ÑŒÑÑ Ð²ÑÐµ Ñ‚Ð¾Ð²Ð°Ñ€Ñ‹

# Ð˜Ð»Ð¸ Ð¿Ñ€Ð¾Ð²ÐµÑ€ÑŒ API
curl http://your-domain.com/api/products | jq length
# Ð”Ð¾Ð»Ð¶Ð½Ð¾ Ð²ÐµÑ€Ð½ÑƒÑ‚ÑŒ Ñ‡Ð¸ÑÐ»Ð¾ Ð±Ð¾Ð»ÑŒÑˆÐµ 0
```

## Ð•ÑÐ»Ð¸ Ð²ÑÑ‘ Ñ€Ð°Ð²Ð½Ð¾ Ð½Ðµ Ñ€Ð°Ð±Ð¾Ñ‚Ð°ÐµÑ‚

ÐÐ°Ð¿Ð¸ÑˆÐ¸ Ð¼Ð½Ðµ Ð»Ð¾Ð³Ð¸:
```bash
docker-compose logs | grep -A 20 "Ð˜Ð½Ð¸Ñ†Ð¸Ð°Ð»Ð¸Ð·Ð°Ñ†Ð¸Ñ Ð±Ð°Ð·Ñ‹"
```

Ð˜Ð»Ð¸ ÐµÑÐ»Ð¸ Ð±ÐµÐ· Docker:
```bash
NODE_ENV=production node force-init-db.js 2>&1 | tee init-log.txt
```
