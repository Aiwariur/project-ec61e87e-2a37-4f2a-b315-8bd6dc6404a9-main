# üë• –°–∏—Å—Ç–µ–º–∞ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –ø–æ—Å–µ—Ç–∏—Ç–µ–ª–µ–π

## –û–ø–∏—Å–∞–Ω–∏–µ

–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Å–∏—Å—Ç–µ–º–∞ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –≤—Å–µ—Ö –ø–æ—Å–µ—Ç–∏—Ç–µ–ª–µ–π —Å–∞–π—Ç–∞ —Å –æ—Ç–ø—Ä–∞–≤–∫–æ–π —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –≤ Telegram –∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ–º –¥–∞–Ω–Ω—ã—Ö –≤ –±–∞–∑—É.

## –ß—Ç–æ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–µ—Ç—Å—è

### –ü—Ä–∏ –∫–∞–∂–¥–æ–º –≤–∏–∑–∏—Ç–µ:
- üåç **IP-–∞–¥—Ä–µ—Å** –ø–æ—Å–µ—Ç–∏—Ç–µ–ª—è
- üìç **–ì–µ–æ–ª–æ–∫–∞—Ü–∏—è**: —Å—Ç—Ä–∞–Ω–∞, –≥–æ—Ä–æ–¥, —Ä–µ–≥–∏–æ–Ω
- üíª **–ë—Ä–∞—É–∑–µ—Ä** –∏ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ
- üîó **–ò—Å—Ç–æ—á–Ω–∏–∫ –ø–µ—Ä–µ—Ö–æ–¥–∞** (–æ—Ç–∫—É–¥–∞ –ø—Ä–∏—à–µ–ª)
- üìÑ **–°—Ç—Ä–∞–Ω–∏—Ü–∞** –∫–æ—Ç–æ—Ä—É—é –ø–æ—Å–µ—Ç–∏–ª
- üìä **–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –≤–∏–∑–∏—Ç–æ–≤** (–Ω–æ–≤—ã–π –∏–ª–∏ –ø–æ–≤—Ç–æ—Ä–Ω—ã–π)

## –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –≤ Telegram

### –ù–æ–≤—ã–π –ø–æ—Å–µ—Ç–∏—Ç–µ–ª—å (–ø–µ—Ä–≤—ã–π –≤–∏–∑–∏—Ç):
```
üÜï –ù–û–í–´–ô –ü–û–°–ï–¢–ò–¢–ï–õ–¨!

üåç –õ–æ–∫–∞—Ü–∏—è:
   ‚Ä¢ –°—Ç—Ä–∞–Ω–∞: –†–æ—Å—Å–∏—è
   ‚Ä¢ –ì–æ—Ä–æ–¥: –ú–æ—Å–∫–≤–∞
   ‚Ä¢ –†–µ–≥–∏–æ–Ω: –ú–æ—Å–∫–≤–∞

üîó IP: 95.31.18.119
üìÑ –°—Ç—Ä–∞–Ω–∏—Ü–∞: /
üîó –û—Ç–∫—É–¥–∞: https://google.com
üíª –ë—Ä–∞—É–∑–µ—Ä: Chrome
```

### –ü–æ–≤—Ç–æ—Ä–Ω—ã–π –≤–∏–∑–∏—Ç:
```
üîÑ –ü–û–í–¢–û–†–ù–´–ô –í–ò–ó–ò–¢ #2

üåç –õ–æ–∫–∞—Ü–∏—è:
   ‚Ä¢ –°—Ç—Ä–∞–Ω–∞: –†–æ—Å—Å–∏—è
   ‚Ä¢ –ì–æ—Ä–æ–¥: –ú–æ—Å–∫–≤–∞
   ‚Ä¢ –†–µ–≥–∏–æ–Ω: –ú–æ—Å–∫–≤–∞

üîó IP: 95.31.18.119
üìÑ –°—Ç—Ä–∞–Ω–∏—Ü–∞: /
üîó –û—Ç–∫—É–¥–∞: –ü—Ä—è–º–æ–π –∑–∞—Ö–æ–¥
üíª –ë—Ä–∞—É–∑–µ—Ä: Chrome

üìä –í—Å–µ–≥–æ –≤–∏–∑–∏—Ç–æ–≤: 2
```

## –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö

### –¢–∞–±–ª–∏—Ü–∞ `visitors`

```sql
CREATE TABLE visitors (
  id INTEGER PRIMARY KEY AUTOINCREMENT,
  ip_address TEXT NOT NULL,
  user_agent TEXT,
  country TEXT,
  city TEXT,
  region TEXT,
  visit_count INTEGER DEFAULT 1,
  first_visit INTEGER NOT NULL,
  last_visit INTEGER NOT NULL,
  referrer TEXT,
  page_url TEXT
);
```

## API Endpoints

### –ü–æ–ª—É—á–∏—Ç—å –≤—Å–µ—Ö –ø–æ—Å–µ—Ç–∏—Ç–µ–ª–µ–π
```
GET /api/visitors
```

–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –ø–æ—Å–µ—Ç–∏—Ç–µ–ª–µ–π, –æ—Ç—Å–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –ø–æ –ø–æ—Å–ª–µ–¥–Ω–µ–º—É –≤–∏–∑–∏—Ç—É.

### –ü–æ–ª—É—á–∏—Ç—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É
```
GET /api/visitors/stats
```

–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç:
- –û–±—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —É–Ω–∏–∫–∞–ª—å–Ω—ã—Ö –ø–æ—Å–µ—Ç–∏—Ç–µ–ª–µ–π
- –ù–æ–≤—ã—Ö –∑–∞ —Å–µ–≥–æ–¥–Ω—è
- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ–≤—Ç–æ—Ä–Ω—ã—Ö –≤–∏–∑–∏—Ç–æ–≤
- –¢–æ–ø-10 —Å—Ç—Ä–∞–Ω
- –¢–æ–ø-10 –≥–æ—Ä–æ–¥–æ–≤
- 10 –ø–æ—Å–ª–µ–¥–Ω–∏—Ö –≤–∏–∑–∏—Ç–æ–≤

### –ü–æ–ª—É—á–∏—Ç—å –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –ø–æ—Å–µ—Ç–∏—Ç–µ–ª—è
```
GET /api/visitors/:id
```

## –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç

### 1. Middleware –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è
–§–∞–π–ª: `server/middleware/visitor-tracker.js`

- –ü–µ—Ä–µ—Ö–≤–∞—Ç—ã–≤–∞–µ—Ç –≤—Å–µ GET-–∑–∞–ø—Ä–æ—Å—ã –∫ —Å—Ç—Ä–∞–Ω–∏—Ü–∞–º —Å–∞–π—Ç–∞
- –ü—Ä–æ–ø—É—Å–∫–∞–µ—Ç API-–∑–∞–ø—Ä–æ—Å—ã –∏ —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ñ–∞–π–ª—ã
- –ò–∑–≤–ª–µ–∫–∞–µ—Ç IP-–∞–¥—Ä–µ—Å (—Å —É—á–µ—Ç–æ–º –ø—Ä–æ–∫—Å–∏)
- –û–ø—Ä–µ–¥–µ–ª—è–µ—Ç –≥–µ–æ–ª–æ–∫–∞—Ü–∏—é —á–µ—Ä–µ–∑ API ip-api.com
- –°–æ—Ö—Ä–∞–Ω—è–µ—Ç –∏–ª–∏ –æ–±–Ω–æ–≤–ª—è–µ—Ç –∑–∞–ø–∏—Å—å –≤ –ë–î
- –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –≤ Telegram

### 2. –ì–µ–æ–ª–æ–∫–∞—Ü–∏—è –ø–æ IP
–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –±–µ—Å–ø–ª–∞—Ç–Ω—ã–π API: `http://ip-api.com/json/{ip}`

–õ–∏–º–∏—Ç: 45 –∑–∞–ø—Ä–æ—Å–æ–≤ –≤ –º–∏–Ω—É—Ç—É (–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –¥–ª—è –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–∞ —Å–∞–π—Ç–æ–≤)

–î–ª—è –ª–æ–∫–∞–ª—å–Ω—ã—Ö IP (127.0.0.1, 192.168.x.x) –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è "–õ–æ–∫–∞–ª—å–Ω–∞—è —Å–µ—Ç—å".

### 3. Telegram-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
–§—É–Ω–∫—Ü–∏—è: `sendVisitorNotification()` –≤ `server/telegram.js`

–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç:
- –ù–æ–≤—ã–π –∏–ª–∏ –ø–æ–≤—Ç–æ—Ä–Ω—ã–π –≤–∏–∑–∏—Ç
- –≠–º–æ–¥–∑–∏ –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –≤–∏–∑–∏—Ç–æ–≤
- –ö—Ä–∞—Ç–∫—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –±—Ä–∞—É–∑–µ—Ä–µ

## –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –ó–∞–ø—É—Å—Ç–∏—Ç—å —Ç–µ—Å—Ç
```bash
npm run test:visitors
```

–¢–µ—Å—Ç –∏–º–∏—Ç–∏—Ä—É–µ—Ç:
1. –ü–µ—Ä–≤—ã–π –≤–∏–∑–∏—Ç –∏–∑ –ú–æ—Å–∫–≤—ã
2. –ü–æ–≤—Ç–æ—Ä–Ω—ã–π –≤–∏–∑–∏—Ç (—Ç–æ—Ç –∂–µ IP)
3. –í–∏–∑–∏—Ç –∏–∑ –°–∞–Ω–∫—Ç-–ü–µ—Ç–µ—Ä–±—É—Ä–≥–∞
4. –ü–æ–ª—É—á–µ–Ω–∏–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
5. –ü–æ–ª—É—á–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ –ø–æ—Å–µ—Ç–∏—Ç–µ–ª–µ–π

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤ Telegram
–ü–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞ —Ç–µ—Å—Ç–∞ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ –±–æ—Ç–∞ - –¥–æ–ª–∂–Ω—ã –ø—Ä–∏–π—Ç–∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ –∫–∞–∂–¥–æ–º –≤–∏–∑–∏—Ç–µ.

## –ù–∞—Å—Ç—Ä–æ–π–∫–∞

### 1. –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ Telegram –Ω–∞—Å—Ç—Ä–æ–µ–Ω
```bash
npm run telegram:get-id
```

–û–±–Ω–æ–≤–∏—Ç–µ `.env`:
```env
TELEGRAM_BOT_TOKEN=–≤–∞—à_—Ç–æ–∫–µ–Ω
TELEGRAM_CHAT_ID=–≤–∞—à_chat_id
```

### 2. –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–µ—Ä–≤–µ—Ä
```bash
npm run server
# –∏–ª–∏
npm run dev:all
```

### 3. –°–∏—Å—Ç–µ–º–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
–ö–∞–∂–¥—ã–π –≤–∏–∑–∏—Ç –Ω–∞ —Å–∞–π—Ç –±—É–¥–µ—Ç –æ—Ç—Å–ª–µ–∂–∏–≤–∞—Ç—å—Å—è –∏ –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å—Å—è –≤ Telegram.

## –ß—Ç–æ –ù–ï –æ—Ç—Å–ª–µ–∂–∏–≤–∞–µ—Ç—Å—è

- API-–∑–∞–ø—Ä–æ—Å—ã (`/api/*`)
- –°—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ñ–∞–π–ª—ã (–∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è, CSS, JS)
- POST/PUT/DELETE –∑–∞–ø—Ä–æ—Å—ã
- –ó–∞–ø—Ä–æ—Å—ã –∫ —Å–ª—É–∂–µ–±–Ω—ã–º —Ñ–∞–π–ª–∞–º

–û—Ç—Å–ª–µ–∂–∏–≤–∞—é—Ç—Å—è —Ç–æ–ª—å–∫–æ —Ä–µ–∞–ª—å–Ω—ã–µ –ø–æ—Å–µ—â–µ–Ω–∏—è —Å—Ç—Ä–∞–Ω–∏—Ü —Å–∞–π—Ç–∞.

## –ü—Ä–∏–≤–∞—Ç–Ω–æ—Å—Ç—å

### –ß—Ç–æ —Ö—Ä–∞–Ω–∏—Ç—Å—è:
- IP-–∞–¥—Ä–µ—Å (–¥–ª—è –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ –ø–æ–≤—Ç–æ—Ä–Ω—ã—Ö –≤–∏–∑–∏—Ç–æ–≤)
- –ü—Ä–∏–º–µ—Ä–Ω–∞—è –≥–µ–æ–ª–æ–∫–∞—Ü–∏—è (—Å—Ç—Ä–∞–Ω–∞, –≥–æ—Ä–æ–¥)
- –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–∞–Ω–Ω—ã–µ (–±—Ä–∞—É–∑–µ—Ä, –∏—Å—Ç–æ—á–Ω–∏–∫)

### –ß—Ç–æ –ù–ï —Ö—Ä–∞–Ω–∏—Ç—Å—è:
- –ü–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
- –ò—Å—Ç–æ—Ä–∏—è –ø—Ä–æ—Å–º–æ—Ç—Ä–æ–≤ (—Ç–æ–ª—å–∫–æ –ø–æ—Å–ª–µ–¥–Ω—è—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞)
- Cookies –∏–ª–∏ —Å–µ—Å—Å–∏–∏

## Production

–í production —Å–∏—Å—Ç–µ–º–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç —Ç–æ—á–Ω–æ —Ç–∞–∫ –∂–µ:
- Middleware –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω
- –ì–µ–æ–ª–æ–∫–∞—Ü–∏—è —Ä–∞–±–æ—Ç–∞–µ—Ç –¥–ª—è —Ä–µ–∞–ª—å–Ω—ã—Ö IP
- –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –ø—Ä–∏—Ö–æ–¥—è—Ç –≤ Telegram

### –í–∞–∂–Ω–æ –¥–ª—è Docker/VPS:
–£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ –≤ nginx/–ø—Ä–æ–∫—Å–∏ –ø–µ—Ä–µ–¥–∞–µ—Ç—Å—è —Ä–µ–∞–ª—å–Ω—ã–π IP:
```nginx
proxy_set_header X-Forwarded-For $remote_addr;
proxy_set_header X-Real-IP $remote_addr;
```

## –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –≤ –∞–¥–º–∏–Ω–∫–µ (–±—É–¥—É—â–µ–µ)

–ü–ª–∞–Ω–∏—Ä—É–µ—Ç—Å—è –¥–æ–±–∞–≤–∏—Ç—å –≤ –∞–¥–º–∏–Ω–∫—É:
- üìä –î–∞—à–±–æ—Ä–¥ —Å –≥—Ä–∞—Ñ–∏–∫–∞–º–∏ –ø–æ—Å–µ—â–µ–Ω–∏–π
- üó∫Ô∏è –ö–∞—Ä—Ç–∞ –ø–æ—Å–µ—Ç–∏—Ç–µ–ª–µ–π
- üìà –ê–Ω–∞–ª–∏—Ç–∏–∫–∞ –ø–æ –≤—Ä–µ–º–µ–Ω–∏
- üîç –§–∏–ª—å—Ç—Ä—ã –∏ –ø–æ–∏—Å–∫

## –û—Ç–∫–ª—é—á–µ–Ω–∏–µ

–ï—Å–ª–∏ –Ω—É–∂–Ω–æ –≤—Ä–µ–º–µ–Ω–Ω–æ –æ—Ç–∫–ª—é—á–∏—Ç—å –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ, –∑–∞–∫–æ–º–º–µ–Ω—Ç–∏—Ä—É–π—Ç–µ –≤ `server/index.js`:

```javascript
// app.use(trackVisitor);
```

## Troubleshooting

### –ù–µ –ø—Ä–∏—Ö–æ–¥—è—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ Telegram: `npm run test:telegram`
2. –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ —Å–µ—Ä–≤–µ—Ä –∑–∞–ø—É—â–µ–Ω
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ —Å–µ—Ä–≤–µ—Ä–∞

### –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–∞—è –≥–µ–æ–ª–æ–∫–∞—Ü–∏—è
- –î–ª—è –ª–æ–∫–∞–ª—å–Ω—ã—Ö IP –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è "–õ–æ–∫–∞–ª—å–Ω–∞—è —Å–µ—Ç—å"
- API ip-api.com –º–æ–∂–µ—Ç –±—ã—Ç—å –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω (–ø—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏)
- –í production –≥–µ–æ–ª–æ–∫–∞—Ü–∏—è –±—É–¥–µ—Ç —Ç–æ—á–Ω–µ–µ

### –î—É–±–ª–∏–∫–∞—Ç—ã —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
- –ö–∞–∂–¥—ã–π –≤–∏–∑–∏—Ç = –æ–¥–Ω–æ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ
- –≠—Ç–æ –Ω–æ—Ä–º–∞–ª—å–Ω–æ, —Ç–∞–∫ –∏ –∑–∞–¥—É–º–∞–Ω–æ
- –î–ª—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É

---

**–í–µ—Ä—Å–∏—è**: 1.0.0  
**–î–∞—Ç–∞**: 3 —Ñ–µ–≤—Ä–∞–ª—è 2026
