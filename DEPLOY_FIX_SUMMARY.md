# üîß –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï: –¢–æ–≤–∞—Ä—ã –Ω–µ –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –ø—Ä–∏ –¥–µ–ø–ª–æ–µ

## üéØ –ü—Ä–æ–±–ª–µ–º–∞
–ü–æ—Å–ª–µ –¥–µ–ø–ª–æ—è –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –ø—É—Å—Ç–∞—è - –Ω–µ—Ç –Ω–∏ –æ–¥–Ω–æ–≥–æ —Ç–æ–≤–∞—Ä–∞.

## üîç –ü—Ä–∏—á–∏–Ω–∞
–°–∫—Ä–∏–ø—Ç –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ –ë–î (`server/init-db.js`) –Ω–µ –Ω–∞—Ö–æ–¥–∏–ª —Ñ–∞–π–ª `products.json` –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ –≤ Docker –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ –∏–∑-–∑–∞ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ–≥–æ –ø—É—Ç–∏.

## ‚úÖ –ß—Ç–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ

### 1. server/init-db.js
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –≤–æ–∑–º–æ–∂–Ω—ã—Ö –ø—É—Ç–µ–π –∫ `products.json`
- ‚úÖ –î–µ—Ç–∞–ª—å–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ–≥–æ –ø—Ä–æ—Ü–µ—Å—Å–∞ –∏–º–ø–æ—Ä—Ç–∞
- ‚úÖ –í—ã–≤–æ–¥ —Å–æ–¥–µ—Ä–∂–∏–º–æ–≥–æ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ –ø—Ä–∏ –æ—à–∏–±–∫–µ
- ‚úÖ –í—ã–±—Ä–æ—Å –∫—Ä–∏—Ç–∏—á–Ω–æ–π –æ—à–∏–±–∫–∏ –µ—Å–ª–∏ —Ñ–∞–π–ª –Ω–µ –Ω–∞–π–¥–µ–Ω

### 2. docker-entrypoint.sh
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞–ª–∏—á–∏—è `products.json` –ø–µ—Ä–µ–¥ –∑–∞–ø—É—Å–∫–æ–º
- ‚úÖ –í—ã–≤–æ–¥ —Ä–∞–∑–º–µ—Ä–∞ —Ñ–∞–π–ª–∞ –∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ —É—Å–ø–µ—à–Ω–æ—Å—Ç–∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ –ë–î
- ‚úÖ –û—Å—Ç–∞–Ω–æ–≤–∫–∞ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ –ø—Ä–∏ –∫—Ä–∏—Ç–∏—á–Ω—ã—Ö –æ—à–∏–±–∫–∞—Ö

### 3. Dockerfile
- ‚úÖ –ò–∑–º–µ–Ω–µ–Ω–æ `COPY products.json* ./` –Ω–∞ `COPY products.json ./products.json`
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ —Ñ–∞–π–ª–æ–≤ –ø–æ—Å–ª–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è –≤ –æ–±—Ä–∞–∑
- ‚úÖ –°–±–æ—Ä–∫–∞ —É–ø–∞–¥—ë—Ç –µ—Å–ª–∏ `products.json` –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç

### 4. –ù–æ–≤—ã–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã
- ‚úÖ `check-deploy-ready.js` - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø–µ—Ä–µ–¥ –¥–µ–ø–ª–æ–µ–º
- ‚úÖ `PRE_DEPLOY_CHECK.md` - –¥–µ—Ç–∞–ª—å–Ω–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ –ø—Ä–æ–≤–µ—Ä–∫–µ
- ‚úÖ –ù–æ–≤—ã–π —Å–∫—Ä–∏–ø—Ç `npm run deploy:check`

## üöÄ –ö–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å

### –ë—ã—Å—Ç—Ä–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø–µ—Ä–µ–¥ –¥–µ–ø–ª–æ–µ–º
```bash
npm run deploy:prepare
```

–≠—Ç–æ—Ç —Å–∫—Ä–∏–ø—Ç:
1. –≠–∫—Å–ø–æ—Ä—Ç–∏—Ä—É–µ—Ç —Ç–æ–≤–∞—Ä—ã –∏–∑ –ë–î –≤ `products.json`
2. –°–æ–±–∏—Ä–∞–µ—Ç —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥
3. –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –≤—Å–µ –∫—Ä–∏—Ç–∏—á–Ω—ã–µ —Ñ–∞–π–ª—ã
4. –í—ã–¥–∞—ë—Ç –æ—Ç—á—ë—Ç –æ –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏

### –†—É—á–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞
```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ products.json –Ω–∞ –º–µ—Å—Ç–µ
ls -lh products.json

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ç–æ–≤–∞—Ä–æ–≤
node -e "console.log('–¢–æ–≤–∞—Ä–æ–≤:', require('./products.json').length)"

# –ó–∞–ø—É—Å—Ç–∏—Ç—å –ø–æ–ª–Ω—É—é –ø—Ä–æ–≤–µ—Ä–∫—É
node check-deploy-ready.js
```

### –î–µ–ø–ª–æ–π
```bash
# –ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–π –ø—Ä–æ–≤–µ—Ä–∫–∏
git add .
git commit -m "fix: –≥–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ —Ç–æ–≤–∞—Ä–æ–≤ –ø—Ä–∏ –¥–µ–ø–ª–æ–µ"
git push origin main
```

## üìä –û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç

–ü–æ—Å–ª–µ –¥–µ–ø–ª–æ—è –≤ –ª–æ–≥–∞—Ö –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å:

```
üöÄ –ó–∞–ø—É—Å–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –ü–æ–ø—É–≥–∞–π–ú–∞—Ä–∫–µ—Ç...
üìÇ –†–∞–±–æ—á–∞—è –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è: /app
üåç NODE_ENV: production

üîç –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ñ–∞–π–ª–æ–≤...
‚úÖ products.json –Ω–∞–π–¥–µ–Ω
üìä –†–∞–∑–º–µ—Ä —Ñ–∞–π–ª–∞: 156789 –±–∞–π—Ç
‚úÖ dist/ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è –Ω–∞–π–¥–µ–Ω–∞
‚úÖ public/images/products/ –Ω–∞–π–¥–µ–Ω–∞
üì∏ –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π: 189

üì¶ –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö...
üîç –ù–∞—á–∏–Ω–∞—é –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—é –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö...
üìÇ –¢–µ–∫—É—â–∞—è –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è: /app/server
üåç NODE_ENV: production
üìä –¢–æ–≤–∞—Ä–æ–≤ –≤ –ë–î: 0
üì¶ –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –ø—É—Å—Ç–∞—è, –Ω–∞—á–∏–Ω–∞—é –∏–º–ø–æ—Ä—Ç —Ç–æ–≤–∞—Ä–æ–≤...
üîç –ü—Ä–æ–≤–µ—Ä—è—é –ø—É—Ç—å: /app/server/../products.json
‚úÖ –§–∞–π–ª –Ω–∞–π–¥–µ–Ω: /app/server/../products.json
üìñ –ß–∏—Ç–∞—é —Ñ–∞–π–ª: /app/server/../products.json
üì¶ –ù–∞–π–¥–µ–Ω–æ —Ç–æ–≤–∞—Ä–æ–≤ –≤ JSON: 63
‚úÖ –£—Å–ø–µ—à–Ω–æ –∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–æ 63 —Ç–æ–≤–∞—Ä–æ–≤
‚úÖ –¢–æ–≤–∞—Ä–æ–≤ –≤ –ë–î –ø–æ—Å–ª–µ –∏–º–ø–æ—Ä—Ç–∞: 63
üéâ –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∑–∞–≤–µ—Ä—à–µ–Ω–∞ —É—Å–ø–µ—à–Ω–æ

üåê –ó–∞–ø—É—Å–∫ —Å–µ—Ä–≤–µ—Ä–∞...
üöÄ Server running on port 3000
üì¶ Environment: production
üåê Serving frontend from /dist
```

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ª–æ–∫–∞–ª—å–Ω–æ

### –¢–µ—Å—Ç Docker –æ–±—Ä–∞–∑–∞
```bash
# –°–æ–±—Ä–∞—Ç—å –æ–±—Ä–∞–∑
docker build -t parrot-shop-test .

# –ó–∞–ø—É—Å—Ç–∏—Ç—å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä
docker run -d --name test -p 3000:3000 -e NODE_ENV=production parrot-shop-test

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏
docker logs test

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å API
curl http://localhost:3000/api/products | node -e "console.log('–¢–æ–≤–∞—Ä–æ–≤:', JSON.parse(require('fs').readFileSync(0)).length)"

# –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å
docker stop test && docker rm test
```

## üìù –ß–µ–∫-–ª–∏—Å—Ç –ø–µ—Ä–µ–¥ –¥–µ–ø–ª–æ–µ–º

- [ ] `products.json` —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –∏ —Å–æ–¥–µ—Ä–∂–∏—Ç 63 —Ç–æ–≤–∞—Ä–∞
- [ ] –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –≤ `public/images/products/` (–º–∏–Ω–∏–º—É–º 63 —à—Ç)
- [ ] `npm run build` –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –±–µ–∑ –æ—à–∏–±–æ–∫
- [ ] `npm run deploy:check` –ø—Ä–æ—Ö–æ–¥–∏—Ç —É—Å–ø–µ—à–Ω–æ
- [ ] –í—Å–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –∑–∞–∫–æ–º–º–∏—á–µ–Ω—ã –≤ git

## üîó –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –º–∞—Ç–µ—Ä–∏–∞–ª—ã

- `PRE_DEPLOY_CHECK.md` - –¥–µ—Ç–∞–ª—å–Ω–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ –ø—Ä–æ–≤–µ—Ä–∫–µ
- `DEPLOY_CHECKLIST.md` - —á–µ–∫-–ª–∏—Å—Ç –¥–ª—è Coolify
- `COOLIFY_DEPLOY.md` - –ø–æ–ª–Ω–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ –¥–µ–ø–ª–æ—é

## üí° –í–∞–∂–Ω—ã–µ –º–æ–º–µ–Ω—Ç—ã

1. **Persistent Volume** - –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –Ω–∞—Å—Ç—Ä–æ–π volume –¥–ª—è `/app/data` –≤ Coolify, –∏–Ω–∞—á–µ –ë–î –±—É–¥–µ—Ç —Å–±—Ä–∞—Å—ã–≤–∞—Ç—å—Å—è –ø—Ä–∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–µ

2. **–õ–æ–≥–∏** - –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –¥–µ–ø–ª–æ–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –ø—Ä–æ–≤–µ—Ä—å –ª–æ–≥–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞, —á—Ç–æ–±—ã —É–±–µ–¥–∏—Ç—å—Å—è —á—Ç–æ —Ç–æ–≤–∞—Ä—ã –∑–∞–≥—Ä—É–∑–∏–ª–∏—Å—å

3. **API –ø—Ä–æ–≤–µ—Ä–∫–∞** - –ø–æ—Å–ª–µ –¥–µ–ø–ª–æ—è –ø—Ä–æ–≤–µ—Ä—å:
   ```bash
   curl https://your-domain.com/api/products
   ```

4. **–ü–æ–≤—Ç–æ—Ä–Ω—ã–π –¥–µ–ø–ª–æ–π** - –µ—Å–ª–∏ –ë–î —É–∂–µ —Å–æ–¥–µ—Ä–∂–∏—Ç —Ç–æ–≤–∞—Ä—ã, –æ–Ω–∏ –Ω–µ –±—É–¥—É—Ç –ø–µ—Ä–µ–∑–∞–ø–∏—Å–∞–Ω—ã (—Å–∫—Ä–∏–ø—Ç –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ç–æ–≤–∞—Ä–æ–≤ –ø–µ—Ä–µ–¥ –∏–º–ø–æ—Ä—Ç–æ–º)

## üÜò –ï—Å–ª–∏ –ø—Ä–æ–±–ª–µ–º–∞ –æ—Å—Ç–∞–ª–∞—Å—å

1. –ü—Ä–æ–≤–µ—Ä—å –ª–æ–≥–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ –≤ Coolify
2. –£–±–µ–¥–∏—Å—å —á—Ç–æ `products.json` –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏
3. –ü—Ä–æ–≤–µ—Ä—å —á—Ç–æ volume –¥–ª—è `/app/data` –Ω–∞—Å—Ç—Ä–æ–µ–Ω
4. –ü–æ–ø—Ä–æ–±—É–π –ø–µ—Ä–µ—Å–æ–∑–¥–∞—Ç—å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä (—É–¥–∞–ª–∏—Ç—å –∏ –∑–∞–¥–µ–ø–ª–æ–∏—Ç—å –∑–∞–Ω–æ–≤–æ)
5. –ü—Ä–æ–≤–µ—Ä—å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è (NODE_ENV=production)

## ‚úÖ –ì–æ—Ç–æ–≤–æ!

–¢–µ–ø–µ—Ä—å –ø—Ä–∏ –∫–∞–∂–¥–æ–º –¥–µ–ø–ª–æ–µ:
- –°–∫—Ä–∏–ø—Ç –ø—Ä–æ–≤–µ—Ä–∏—Ç –Ω–∞–ª–∏—á–∏–µ `products.json`
- –í—ã–≤–µ–¥–µ—Ç –¥–µ—Ç–∞–ª—å–Ω—ã–µ –ª–æ–≥–∏ –ø—Ä–æ—Ü–µ—Å—Å–∞
- –ó–∞–≥—Ä—É–∑–∏—Ç —Ç–æ–≤–∞—Ä—ã –≤ –ë–î
- –£–ø–∞–¥—ë—Ç —Å –ø–æ–Ω—è—Ç–Ω–æ–π –æ—à–∏–±–∫–æ–π –µ—Å–ª–∏ —á—Ç–æ-—Ç–æ –Ω–µ —Ç–∞–∫
